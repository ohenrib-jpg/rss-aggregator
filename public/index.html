<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgrÃ©gateur RSS + IA v2.5</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <!-- En-tÃªte -->
    <header>
        <div class="header-main">
            <h1>ğŸ“Š AgrÃ©gateur RSS ThÃ©matique + IA</h1>
            <div style="display: flex; gap: 15px; margin-top: 10px; flex-wrap: wrap;">
                <span style="background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 0.9rem;">Olivier Henri B.</span>
                <span style="background: rgba(255,255,255,0.15); padding: 5px 10px; border-radius: 6px; font-family: monospace; font-size: 0.85rem;">V.2.5</span>
                <span id="aiStatus" style="background: rgba(255,255,255,0.15); padding: 5px 10px; border-radius: 6px; font-size: 0.85rem;">ğŸ¤– IA: PrÃªt</span>
            </div>
        </div>
    </header>

    <!-- Messages -->
    <div id="messageContainer"></div>

    <!-- Barre de statut -->
    <div class="status-bar">
        <div class="last-update" id="lastUpdate">PrÃªt</div>
        <div class="refresh-controls">
            <div class="auto-refresh-indicator"><span class="blink">ğŸ”„</span> Auto-actualisation active</div>
            <button id="refreshBtn">ğŸ”„ Actualiser</button>
        </div>
    </div>

    <!-- Barre d'actions -->
    <div class="export-bar">
        <div class="export-controls">
            <button class="btn btn-success" id="exportJsonBtn">ğŸ“¥ Exporter JSON</button>
            <button class="btn btn-success" id="exportCsvBtn">ğŸ“¥ Exporter CSV</button>
            <button class="btn btn-secondary" id="learningTabBtn">ğŸ“Š Stats IA</button>
            <button class="btn btn-secondary" id="settingsTabBtn">âš™ï¸ ParamÃ¨tres</button>
        </div>
    </div>

    <!-- Panneau de contrÃ´le dÃ©diÃ© rapport IA -->
    <div class="control-panel" style="padding: 15px; background: #f8fafc; border-radius: 8px; margin: 15px 0;">
        <h3 style="margin-bottom: 15px;">ğŸ› ï¸ Outils d'Analyse AvancÃ©e</h3>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <button class="btn btn-success" onclick="window.app.refreshArticles()">
                ğŸ”„ Actualiser les donnÃ©es
            </button>
            <button class="btn btn-info" onclick="window.app.generateAIAnalysisReport()">
                ğŸ§  GÃ©nÃ©rer rapport IA
            </button>
            <button class="btn btn-warning" onclick="window.app.exportArticlesToCSV()">
                ğŸ“Š Exporter CSV
            </button>
            <button class="btn btn-secondary" onclick="window.app.exportToJSON()">
                ğŸ’¾ Exporter JSON
            </button>
        </div>
        <p style="margin-top: 10px; color: #64748b; font-size: 0.9rem;">
            Le rapport IA analyse en profondeur vos donnÃ©es avec l'intelligence artificielle.
        </p>
    </div>

    <!-- Onglets -->
    <div class="tab-container">
        <div class="tabs">
            <div class="tab active" data-tab="articles">ğŸ“„ Articles</div>
            <div class="tab" data-tab="analysis">ğŸ“ˆ Analyse</div>
            <div class="tab" data-tab="metrics">ğŸ¯ MÃ©triques</div>
            <div class="tab" data-tab="sentiment">ğŸ˜Š Sentiment</div>
            <div class="tab" data-tab="learning">ğŸ§  Apprentissage</div>
            <div class="tab" data-tab="feeds">ğŸ“° Flux RSS</div>
            <div class="tab" data-tab="themes">ğŸ¨ ThÃ¨mes</div>
            <div class="tab" data-tab="settings">âš™ï¸ ParamÃ¨tres</div>
        </div>

        <!-- Articles -->
        <div id="articlesTab" class="tab-content active">
            <div class="card full-width">
                <h3>ğŸ“„ Derniers Articles</h3>
                <div id="articlesList" class="loading">Chargement...</div>
            </div>
        </div>

        <!-- Analyse -->
        <div id="analysisTab" class="tab-content">
            <div class="dashboard">
                <div class="card">
                    <h3>ğŸ“Š RÃ©partition par ThÃ¨me</h3>
                    <canvas id="themeChart" style="max-height: 400px;"></canvas>
                </div>
                <div class="card">
                    <h3>ğŸ“ˆ Ã‰volution Temporelle</h3>
                    <canvas id="timelineChart" style="max-height: 400px;"></canvas>
                </div>
            </div>
            <div class="card full-width" style="margin-top: 20px;">
                <h3>ğŸ”„ Ã‰volution des ThÃ¨mes</h3>
                <canvas id="themeEvolutionChart" style="max-height: 400px;"></canvas>
            </div>
        </div>

        <!-- MÃ©triques -->
        <div id="metricsTab" class="tab-content">
            <div class="stats-grid">
                <div class="metric-card">
                    <strong>Total Articles :</strong>
                    <span id="m_total" style="font-size: 1.5rem; display: block; margin-top: 10px; color: #3b82f6;">â€”</span>
                </div>
                <div class="metric-card">
                    <strong>Confiance :</strong>
                    <span id="m_confidence" style="font-size: 1.5rem; display: block; margin-top: 10px; color: #10b981;">â€”</span>
                </div>
                <div class="metric-card">
                    <strong>BayÃ©sien :</strong>
                    <span id="m_posterior" style="font-size: 1.5rem; display: block; margin-top: 10px; color: #8b5cf6;">â€”</span>
                </div>
                <div class="metric-card">
                    <strong>Corroboration :</strong>
                    <span id="m_corro" style="font-size: 1.5rem; display: block; margin-top: 10px; color: #f59e0b;">â€”</span>
                </div>
            </div>
            <div class="card full-width" style="margin-top: 20px;">
                <h3>ğŸ† ThÃ¨mes les plus populaires</h3>
                <ul id="topThemes" class="top-themes">
                    <li class="loading">Chargement...</li>
                </ul>
            </div>
        </div>

        <!-- Sentiment -->
        <div id="sentimentTab" class="tab-content">
            <div id="sentimentOverview" class="loading">Chargement de l'analyse de sentiment...</div>
        </div>

        <!-- Apprentissage -->
        <div id="learningTab" class="tab-content">
            <div id="learningStats" class="loading">Chargement des statistiques d'apprentissage...</div>
        </div>

        <!-- Flux RSS -->
        <div id="feedsTab" class="tab-content">
            <div class="card full-width">
                <h3>ğŸ“° Gestion des Flux RSS</h3>
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-success" id="addFeedBtn">â• Ajouter un flux</button>
                </div>
                <div id="feedsManagerList" class="loading">Chargement des flux...</div>
            </div>
        </div>

        <!-- ThÃ¨mes -->
        <div id="themesTab" class="tab-content">
            <div class="card full-width">
                <h3>ğŸ¨ Gestion des ThÃ¨mes</h3>
                <div style="margin-bottom: 20px; display: flex; gap: 10px;">
                    <button class="btn btn-success" id="addThemeBtn">â• Ajouter un thÃ¨me</button>
                    <button class="btn btn-secondary" id="importThemesBtn">ğŸ“¥ Importer thÃ¨mes</button>
                    <button class="btn btn-secondary" id="analyzeThemesBtn">ğŸ” Analyser articles</button>
                </div>
                <div id="themesManagerList" class="loading">Chargement des thÃ¨mes...</div>
            </div>
        </div>

        <!-- ParamÃ¨tres -->
        <div id="settingsTab" class="tab-content">
            <div class="loading">Chargement des paramÃ¨tres...</div>
        </div>
    </div>
</div>

<!-- Modals -->
<div id="addFeedModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>â• Ajouter un Flux RSS</h2>
        <div style="margin: 20px 0;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">URL du flux:</label>
            <input type="url" id="feedUrl" placeholder="https://example.com/rss.xml" style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px;">
        </div>
        <div style="margin: 20px 0;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Titre (optionnel):</label>
            <input type="text" id="feedTitle" placeholder="Nom du flux" style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px;">
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn btn-success" id="saveFeedBtn">ğŸ’¾ Sauvegarder</button>
            <button class="btn btn-secondary" id="cancelFeedBtn">âŒ Annuler</button>
        </div>
    </div>
</div>

<div id="addThemeModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>ğŸ¨ Ajouter un ThÃ¨me</h2>
        <div style="margin: 20px 0;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Nom du thÃ¨me:</label>
            <input type="text" id="themeName" placeholder="Politique internationale" style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px;">
        </div>
        <div style="margin: 20px 0;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Mots-clÃ©s (un par ligne):</label>
            <textarea id="themeKeywords" placeholder="diplomatie&#10;relations internationales&#10;conflit" style="width: 100%; height: 150px; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px;"></textarea>
        </div>
        <div style="margin: 20px 0;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Couleur:</label>
            <input type="color" id="themeColor" value="#6366f1" style="width: 100%; height: 40px;">
        </div>
        <div style="margin: 20px 0;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Description:</label>
            <textarea id="themeDescription" placeholder="Description du thÃ¨me..." style="width: 100%; height: 80px; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px;"></textarea>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn btn-success" id="saveThemeBtn">ğŸ’¾ Sauvegarder</button>
            <button class="btn btn-secondary" id="cancelThemeBtn">âŒ Annuler</button>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="app.js"></script>
<script>
// Gestion des Ã©vÃ©nements une fois que l'application est chargÃ©e
document.addEventListener('DOMContentLoaded', function() {
    // Initialiser l'application
    window.app.init();
    
    // Configuration des Ã©couteurs d'Ã©vÃ©nements pour les onglets
    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', function() {
            const tabName = this.getAttribute('data-tab');
            if (window.app && window.app.showTab) {
                window.app.showTab(tabName);
            }
        });
    });
    
    // Configuration des autres boutons
    document.getElementById('refreshBtn').addEventListener('click', function() {
        if (window.app && window.app.refreshArticles) {
            window.app.refreshArticles();
        }
    });
    
    document.getElementById('exportJsonBtn').addEventListener('click', function() {
        if (window.app && window.app.exportToJSON) {
            window.app.exportToJSON();
        }
    });
    
    document.getElementById('exportCsvBtn').addEventListener('click', function() {
        if (window.app && window.app.exportArticlesToCSV) {
            window.app.exportArticlesToCSV();
        }
    });
    
    document.getElementById('learningTabBtn').addEventListener('click', function() {
        if (window.app && window.app.showTab) {
            window.app.showTab('learning');
        }
    });
    
    document.getElementById('settingsTabBtn').addEventListener('click', function() {
        if (window.app && window.app.showTab) {
            window.app.showTab('settings');
        }
    });
    
    document.getElementById('addFeedBtn').addEventListener('click', function() {
        if (window.app && window.app.showAddFeedModal) {
            window.app.showAddFeedModal();
        }
    });
    
    document.getElementById('addThemeBtn').addEventListener('click', function() {
        if (window.app && window.app.showAddThemeModal) {
            window.app.showAddThemeModal();
        }
    });
    
    document.getElementById('importThemesBtn').addEventListener('click', function() {
        if (window.app && window.app.importThemesFromFile) {
            window.app.importThemesFromFile();
        }
    });
    
    document.getElementById('analyzeThemesBtn').addEventListener('click', function() {
        // Cette fonctionnalitÃ© sera implÃ©mentÃ©e plus tard
        alert('Analyse thÃ©matique dÃ©clenchÃ©e');
    });
    
    // Gestion des modals
    document.querySelectorAll('.modal .close').forEach(closeBtn => {
        closeBtn.addEventListener('click', function() {
            this.closest('.modal').style.display = 'none';
        });
    });
    
    document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', function(e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
    });
    
    // Gestion de la sauvegarde des flux
    document.getElementById('saveFeedBtn').addEventListener('click', function() {
        // ImplÃ©mentation Ã  venir
        alert('FonctionnalitÃ© de sauvegarde de flux Ã  implÃ©menter');
    });
    
    document.getElementById('cancelFeedBtn').addEventListener('click', function() {
        document.getElementById('addFeedModal').style.display = 'none';
    });
    
    // Gestion de la sauvegarde des thÃ¨mes
    document.getElementById('saveThemeBtn').addEventListener('click', function() {
        // ImplÃ©mentation Ã  venir
        alert('FonctionnalitÃ© de sauvegarde de thÃ¨me Ã  implÃ©menter');
    });
    
    document.getElementById('cancelThemeBtn').addEventListener('click', function() {
        document.getElementById('addThemeModal').style.display = 'none';
    });
});
</script>
</body>
</html>