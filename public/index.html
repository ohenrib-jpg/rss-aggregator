<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgrÃ©gateur RSS ThÃ©matique</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <header>
        <h1>ğŸ“Š AgrÃ©gateur RSS ThÃ©matique</h1>
        <p>Analysez vos flux RSS par thÃ¨mes personnalisÃ©s - DÃ©tection avancÃ©e des tendances et analyse de sentiment</p>
    </header>

    <div id="messageContainer"></div>

    <div class="status-bar">
        <div class="last-update" id="lastUpdate">Chargement...</div>
        <div class="refresh-controls">
            <div class="auto-refresh-indicator"><span class="blink">ğŸ”„</span> Auto-actualisation</div>
            <button class="refresh" onclick="app.manualRefresh()" id="refreshBtn">ğŸ”„ GÃ©nÃ©rer</button>
        </div>
    </div>

    <div class="export-bar">
        <div class="export-controls">
            <button class="export-btn json" onclick="app.exportData('json')">ğŸ“¥ Export JSON</button>
            <button class="export-btn csv" onclick="app.exportData('csv')">ğŸ“¥ Export CSV</button>
            <button class="export-btn stats" onclick="app.showLearningStats()">ğŸ“Š Stats Apprentissage</button>
        </div>
    </div>

    <div class="stats-grid" id="statsGrid">
        <div class="loading">Chargement des donnÃ©es...</div>
    </div>

    <div class="tab-container">
        <div class="tabs">
            <div class="tab active" onclick="showTab('analysis', event)">ğŸ“ˆ Analyse</div>
            <div class="tab" onclick="showTab('trends', event)">ğŸ“Š Tendances</div>
            <div class="tab" onclick="showTab('metrics', event)">ğŸ¯ MÃ©triques</div>
            <div class="tab" onclick="showTab('sentiment', event)">ğŸ˜Š Sentiment</div>
            <div class="tab" onclick="showTab('learning', event)">ğŸ§  Apprentissage</div>
            <div class="tab" onclick="showTab('feeds', event)">ğŸ“° Flux RSS</div>
            <div class="tab" onclick="showTab('themes', event)">ğŸ¨ ThÃ¨mes</div>
            <div class="tab" onclick="showTab('articles', event)">ğŸ“„ Articles</div>
        </div>

        <!-- Onglet Analyse -->
        <div id="analysisTab" class="tab-content active">
            <div class="dashboard">
                <div class="card">
                    <h3>RÃ©partition par ThÃ¨me</h3>
                    <canvas id="themeChart" height="250"></canvas>
                </div>
                <div class="card">
                    <h3>Ã‰volution Temporelle</h3>
                    <canvas id="timelineChart" height="250"></canvas>
                </div>
            </div>
        </div>

        <!-- Onglet Tendances -->
        <div id="trendsTab" class="tab-content">
            <div class="dashboard">
                <div class="card full-width">
                    <h3>ğŸ“ˆ Ã‰volution des ThÃ¨mes</h3>
                    <div id="trendsTable" class="trends-table">
                        <div class="loading">Calcul des tendances...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- âœ… Onglet MÃ©triques AmÃ©liorÃ© -->
        <div id="metricsTab" class="tab-content">
            <div class="dashboard">
                <div class="card full-width">
                    <h3>ğŸ¯ Statistiques Globales</h3>
                    <div class="metrics-cards" style="display:flex;gap:15px;flex-wrap:wrap;">
                        <div class="metric-card">
                            <strong>Total Articles :</strong> <span id="m_total">â€”</span>
                        </div>
                        <div class="metric-card">
                            <strong>Confiance Moyenne :</strong> <span id="m_confidence">â€”</span>
                        </div>
                        <div class="metric-card">
                            <strong>FiabilitÃ© BayÃ©sienne :</strong> <span id="m_posterior">â€”</span>
                        </div>
                        <div class="metric-card">
                            <strong>Corroboration Moyenne :</strong> <span id="m_corro">â€”</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard">
                <div class="card full-width">
                    <h3>ğŸ“ˆ Ã‰volution du Sentiment (30 derniers jours)</h3>
                    <canvas id="sentimentChart" height="280"></canvas>
                </div>
            </div>

            <div class="dashboard">
                <div class="card full-width">
                    <h3>ğŸ† ThÃ¨mes Principaux</h3>
                    <ul id="topThemes" class="top-themes" style="list-style:none;padding:0;"></ul>
                </div>
            </div>
        </div>

        <!-- Onglet Sentiment -->
        <div id="sentimentTab" class="tab-content">
            <div class="dashboard">
                <div class="card full-width">
                    <h3>ğŸ“Š AperÃ§u du Sentiment Global</h3>
                    <div id="sentimentOverview"><div class="loading">Analyse de sentiment...</div></div>
                </div>
            </div>
        </div>

        <!-- Onglet Apprentissage -->
        <div id="learningTab" class="tab-content">
            <div class="dashboard">
                <div class="card full-width">
                    <h3>ğŸ§  Apprentissage</h3>
                    <div id="learningStats"><div class="loading">Chargement...</div></div>
                </div>
            </div>
        </div>

        <!-- Onglet Flux -->
        <div id="feedsTab" class="tab-content">
            <div class="card">
                <h3>ğŸ“‹ Flux RSS</h3>
                <div id="feedsList"><div class="loading">Chargement des flux...</div></div>
            </div>
        </div>

        <!-- Onglet ThÃ¨mes -->
        <div id="themesTab" class="tab-content">
            <div class="card">
                <h3>ğŸ¨ Mes ThÃ¨mes</h3>
                <div id="themesList"><div class="loading">Chargement des thÃ¨mes...</div></div>
            </div>
        </div>

        <!-- Onglet Articles -->
        <div id="articlesTab" class="tab-content">
            <div class="card">
                <h3>ğŸ“„ Derniers Articles</h3>
                <div id="articlesList"><div class="loading">Chargement des articles...</div></div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Apprentissage -->
<div id="learningStatsModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h3>ğŸ“Š Statistiques d'Apprentissage</h3>
        <div id="modalLearningStats"><div class="loading">Chargement...</div></div>
    </div>
</div>

<script src="app.js"></script>
</body>
</html>
